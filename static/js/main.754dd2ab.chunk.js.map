{"version":3,"sources":["componts/Searchbar/Searchbar.jsx","componts/ImageGalleryItem/ImageGalleryItem.jsx","componts/Button/Button.jsx","services/api-service.js","componts/Modal/Modal.jsx","componts/ImageGallery/ImageGallery.jsx","App.js","index.js"],"names":["Searchbar","state","searchQuery","handleInputChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","event","preventDefault","trim","props","onSubmit","alert","className","this","type","placeholder","name","onChange","Component","ImageGalleryItem","getId","id","onClick","images","map","largeImageURL","src","alt","Button","getImageApi","searchValue","page","axios","get","params","q","key","image_type","orientation","per_page","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","ImageGallery","imagesInfo","status","showModal","handleLoadMore","prevState","toggleModal","formSubmitHandler","getInfoById","currentId","find","image","prevProps","then","responce","data","total","hits","newImages","scrollTo","top","document","documentElement","scrollHeight","behavior","color","height","width","App","handleFormSubmit","queryValue","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.754dd2ab.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './Searchbar.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    searchQuery: '',\r\n  };\r\n\r\n  handleInputChange = e => {\r\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.searchQuery.trim() === '') {\r\n      alert('Write your search query');\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.searchQuery}\r\n            name=\"value\"\r\n            // autocomplete=\"off\"\r\n            // autofocus\r\n            onChange={this.handleInputChange}\r\n          />\r\n\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React, { Component } from 'react';\r\nimport './ImageGalleryItem.css';\r\n\r\nclass ImageGalleryItem extends Component {\r\n  getId = event => {\r\n    const id = event.currentTarget.id;\r\n    this.props.onClick(id);\r\n  };\r\n\r\n  render() {\r\n    const { images } = this.props;\r\n    return images.map(({ largeImageURL, id }) => (\r\n      <li key={id} id={id} className=\"ImageGalleryItem\" onClick={this.getId}>\r\n        <img src={largeImageURL} alt=\"\" className=\"ImageGalleryItem-image\" />\r\n      </li>\r\n    ));\r\n  }\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import './Button.css';\r\nexport default function Button({ value, onClick }) {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className=\"Button\">\r\n      {value}\r\n    </button>\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\nconst getImageApi = (searchValue, page) => {\r\n  return axios.get('https://pixabay.com/api/', {\r\n    params: {\r\n      q: searchValue,\r\n      key: '22683301-b01030d0df8a1fa2bda925efb',\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      per_page: 12,\r\n      page: page,\r\n    },\r\n  });\r\n};\r\n\r\nexport default getImageApi;\r\n","import React, { Component } from 'react';\r\nimport './Modal.css';\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src } = this.props;\r\n    return (\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">\r\n          <img src={src.largeImageURL} alt=\"\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport './ImageGallery.css';\r\n\r\nimport ImageGalleryItem from 'componts/ImageGalleryItem/ImageGalleryItem';\r\nimport Button from 'componts/Button/Button';\r\nimport getImageApi from 'services/api-service';\r\nimport Modal from 'componts/Modal/Modal';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    page: 1,\r\n    imagesInfo: [],\r\n    status: 'idle',\r\n    id: '',\r\n    showModal: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { page } = this.state;\r\n    const { searchValue } = this.props;\r\n\r\n    if (prevProps.searchValue !== searchValue) {\r\n      this.setState({\r\n        status: 'pending',\r\n        page: 1,\r\n        imagesInfo: [],\r\n      });\r\n\r\n      getImageApi(searchValue, page).then(responce => {\r\n        if (responce.data.total !== 0) {\r\n          this.setState({\r\n            imagesInfo: responce.data.hits,\r\n            status: 'resolve',\r\n          });\r\n        } else {\r\n          this.setState({ status: 'rejected' });\r\n        }\r\n      });\r\n    }\r\n\r\n    if (prevProps.searchValue === searchValue && prevState.page !== page) {\r\n      getImageApi(searchValue, page).then(responce => {\r\n        const newImages = responce.data.hits;\r\n        this.setState({\r\n          imagesInfo: [...prevState.imagesInfo, ...newImages],\r\n          status: 'resolve',\r\n        });\r\n      });\r\n    }\r\n\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  handleLoadMore = prevState => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  formSubmitHandler = id => {\r\n    this.setState({ id: id });\r\n    this.toggleModal();\r\n  };\r\n\r\n  getInfoById = () => {\r\n    const currentId = +this.state.id;\r\n\r\n    return this.state.imagesInfo.find(image => image.id === currentId);\r\n  };\r\n\r\n  render() {\r\n    const { status, imagesInfo, showModal } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return <h2>Пожалуйста, введите поисковый запрос</h2>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return <Loader type=\"Oval\" color=\"#00BFFF\" height={80} width={80} />;\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <h2>Иллюстрации по запросу {this.props.searchValue} не найдены</h2>;\r\n    }\r\n\r\n    if (status === 'resolve') {\r\n      return (\r\n        <div className=\"content\">\r\n          <ul className=\"ImageGallery\">\r\n            <ImageGalleryItem images={imagesInfo} onClick={this.formSubmitHandler} />\r\n          </ul>\r\n          <Button value=\"Load more\" onClick={this.handleLoadMore} />\r\n\r\n          {showModal && <Modal onClose={this.toggleModal} src={this.getInfoById()} />}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import './App.css';\nimport React, { Component } from 'react';\n\nimport Searchbar from 'componts/Searchbar/Searchbar';\nimport ImageGallery from 'componts/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleFormSubmit = queryValue => {\n    this.setState({ searchQuery: queryValue });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery searchValue={this.state.searchQuery} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}